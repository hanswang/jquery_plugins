(function(c){c.okCycle={};c.fn.okCycle=function(b){function y(a,d){var e=c.inArray(d[0],a.data(k)),f=a.data(p);-1<e&&(d[0].src=d[0]._src,d.imagesLoaded().progress(function(d,c){a.data(k).splice(e,1);f.loaded++;c.isLoaded||f.broken++;b.onProgress.call(a,f,c);f.loaded===f.total&&b.onDone.call(a,f)}))}function v(a){a=a||this;a.data(l)&&a.data(l,clearTimeout(a.data(l)));return a.data(r,!1)}function m(){var a=this.data(r,!0);return a.data(l,setTimeout(function(){s.call(a)},b.duration))}function s(){var a=
this.data(h),b=a+1;return t(this,a,b==this.children().length?0:b,!0)}function w(){var a=this.data(h),b=a-1;return t(this,a,0>b?this.children().length-1:b,!1)}function x(a){var b=this.data(h);return t(this,b,a,a>b)}function t(a,d,e,f){var g,q;!a.data(u)&&d!=e&&(a.data(u,!0),g=c.extend(c.Deferred(),{from:a.children().eq(d),to:a.children().eq(e),fromIndex:d,toIndex:e,forward:f,easing:b.easing,speed:b.speed}),b.beforeMove.call(a,g),g.done(function(){a.data(u,!1);b.afterMove.call(a,g);a.data(r)&&m.call(a)}),
d=n.move.call(a.data(h,e),g),0<b.preload&&b.loadOnShow&&(d||n.to).find("img").each(function(){y(a,c(this))}),c.each(b.ui,function(){(q=c.okCycle.ui[this])&&q.move&&q.move.call(a,a.data("ui"),g)}));return a}b=c.extend({effect:"scroll",easing:"swing",ui:[],duration:2E3,speed:300,preload:1,loadOnShow:!1,autoplay:!1,hoverBehavior:function(){var a=this;(this.data("ui")||a).hover(function(){a.pause()},function(){a.play()})},afterSetup:function(){},beforeMove:function(a){},afterMove:function(a){},onDone:function(){},
onProgress:function(a,b){c(b.img).fadeIn()}},b);var n=c.okCycle[b.effect],u="animating",r="autoplaying",h="activeSlide",l="interval",p="images",k="unloaded";if(!n)throw"No such transition '"+b.effect+"'";return this.each(function(){var a=c(this),d=!1===b.preload?c(""):c("img",a),e,f;a.data(p,{loaded:0,broken:0,total:d.length});e=a.data(p);b.preload&&0<b.preload&&(b.loadOnShow&&(a.data(k,[]),d.slice(b.preload).each(function(){this._src=this.src;this.src="";a.data(k).push(c(this).hide()[0])})),d=d.slice(0,
b.preload));a.data(h,0);b.ui.length&&(a.data("ui",a.addClass("okCycle").wrap("<div class='okCycle-ui'/>").parent()),c.each(b.ui,function(d,e){(f=c.okCycle.ui[e].init)&&f.call(a,a.data("ui"),b)}));d.imagesLoaded().done(function(d){e.loaded==e.total&&b.onDone.call(a,e);n.init.call(a,b)}).progress(function(d,c){e.loaded++;c.isLoaded||e.broken++;b.onProgress.call(a,e,c)});a.extend({pause:v,play:m,next:s,prev:w,moveTo:x});if(!0===b.autoplay||"number"==typeof b.autoPlay)setTimeout(function(){m.call(a)},
isNaN(b.autoplay)?0:b.autoplay),"function"==typeof b.hoverBehavior&&b.hoverBehavior.call(a);b.afterSetup.call(a)}).extend({pause:function(a){return v.call(a||this)},play:function(a){return m.call(a||this)},next:function(a){return s.call(a||this)},prev:function(a){return w.call(a||this)},moveTo:function(){var a,b=arguments[0];2==arguments.length&&(a=arguments[0],b=arguments[1]);return x.call(a||this,b)}})}})(jQuery);
